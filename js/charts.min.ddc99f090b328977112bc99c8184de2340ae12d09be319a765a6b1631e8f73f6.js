(()=>{Qt=!0,r="u-",Xt="uplot",sn=r+"hz",dn=r+"vt",hn=r+"title",mn=r+"wrap",kn=r+"under",Un=r+"over",rs=r+"axis",A=r+"off",ls=r+"select",ds=r+"cursor-x",js=r+"cursor-y",ws=r+"cursor-pt",Ms=r+"legend",Ss=r+"live",As=r+"inline",ks=r+"series",Es=r+"marker",Fe=r+"label",Os=r+"value",W="width",$="height",B="top",Pe="bottom",N="left",Ee="right",Ae="#000",De=Ae+"0",Me="mousemove",dt="mousedown",he="mouseup",ze="mouseenter",Ne="mouseleave",et="dblclick",_s="resize",ys="scroll",yt="change",X="dppxchange",be="--",S=typeof window!="undefined",_e=S?document:null,R=S?window:null,bs=S?navigator:null;function $t(){let e=devicePixelRatio;n!=e&&(n=e,Se&&Ot(yt,Se,$t),Se=matchMedia(`(min-resolution: ${n-.001}dppx) and (max-resolution: ${n+.001}dppx)`),H(yt,Se,$t),R.dispatchEvent(new CustomEvent(X)))}function g(e,t){if(t!=null){let n=e.classList;!n.contains(t)&&n.add(t)}}function Ke(e,t){let n=e.classList;n.contains(t)&&n.remove(t)}function a(e,t,n){e.style[t]=n+"px"}function y(e,t,n,s){let o=_e.createElement(e);return t!=null&&g(o,t),n!=null&&n.insertBefore(o,s),o}function b(e,t){return y("div",e,t)}It=new WeakMap;function _(e,t,n,s,o){let i="translate("+t+"px,"+n+"px)",a=It.get(e);i!=a&&(e.style.transform=i,It.set(e,i),t<0||n<0||t>s||n>o?g(e,A):Ke(e,A))}zt=new WeakMap;function vs(e,t,n){let s=t+n,o=zt.get(e);s!=o&&(zt.set(e,s),e.style.background=t,e.style.borderColor=n)}xt=new WeakMap;function gs(e,t,n,s){let o=t+""+n,i=xt.get(e);o!=i&&(xt.set(e,o),e.style.height=n+"px",e.style.width=t+"px",e.style.marginLeft=s?-t/2+"px":0,e.style.marginTop=s?-n/2+"px":0)}re={passive:!0},ps={...re,capture:!0};function H(e,t,n,s){t.addEventListener(e,n,s?ps:re)}function Ot(e,t,n){t.removeEventListener(e,n,re)}S&&$t();function j(e,t,n,s){let o;n=n||0,s=s||t.length-1;let i=s<=2147483647;for(;s-n>1;)o=i?n+s>>1:m((n+s)/2),t[o]<e?n=o:s=o;return e-t[n]<=t[s]-e?n:s}function ms(e){let t=(t,n,s)=>{let o=-1,i=-1;for(let i=n;i<=s;i++)if(e(t[i])){o=i;break}for(let o=s;o>=n;o--)if(e(t[o])){i=o;break}return[o,i]};return t}pt=e=>e!=null,mt=e=>e!=null&&e>0,oe=ms(pt),us=ms(mt);function Ds(e,t,n,s=0,i=!1){let c=i?us:oe,l=i?mt:pt;[t,n]=c(e,t,n);let a=e[t],r=e[t];if(t>-1)if(s==1)a=e[t],r=e[n];else if(s==-1)a=e[n],r=e[t];else for(let o=t;o<=n;o++){let s=e[o];l(s)&&(s<a?a=s:s>r&&(r=s))}return[a??o,r??-o]}function ge(e,t,n,s){let r=Re(e),u=Re(t);e==t&&(r==-1?(e*=n,t/=n):(e/=n,t*=n));let h=n==10?w:He,f=r==1?m:p,g=u==1?p:m,l=f(h(c(e))),d=g(h(c(t))),o=z(n,l),a=z(n,d);return n==10&&(l<0&&(o=i(o,-l)),d<0&&(a=i(a,-d))),s||n==2?(e=o*r,t=a*u):(e=Hn(e,o),t=je(t,a)),[e,t]}function ot(e,t,n,s){let o=ge(e,t,n,s);return e==0&&(o[0]=0),t==0&&(o[1]=0),o}ae=.1,nt={mode:3,pad:ae},V={pad:0,soft:null,mode:0},cs={min:V,max:V};function we(e,t,n,s){return ue(n)?is(e,t,n):(V.pad=n,V.soft=s?0:null,V.mode=s?3:0,is(e,t,cs))}function t(e,t){return e??t}function Ns(e,n,s){for(n=t(n,0),s=t(s,e.length-1);n<=s;){if(e[n]!=null)return!0;n++}return!1}function is(e,n,s){let j=s.min,g=s.max,A=t(j.pad,0),k=t(g.pad,0),R=t(j.hard,-o),N=t(g.hard,o),r=t(j.soft,o),l=t(g.soft,-o),f=t(j.mode,0),p=t(g.mode,0),a=n-e,D=w(a),C=h(c(e),c(n)),T=w(C),S=c(T-D);(a<1e-24||S>10)&&(a=0,(e==0||n==0)&&(a=1e-24,f==2&&r!=o&&(A=0),p==2&&l!=-o&&(k=0)));let O=a||C||1e3,M=w(O),E=z(10,m(M)),F=O*(a==0?e==0?.1:1:A),y=i(Hn(e-F,E/10),24),b=e>=r&&(f==1||f==3&&y<=r||f==2&&y>=r)?r:o,_=h(R,y<b&&e>=b?b:v(b,y)),L=O*(a==0?n==0?.1:1:k),u=i(je(n+L,E/10),24),d=n<=l&&(p==1||p==3&&u>=l||p==2&&u<=l)?l:-o,x=v(N,u>d&&n<=d?d:h(d,u));return _==x&&_==0&&(x=100),[_,x]}ns=new Intl.NumberFormat(S?bs.language:"en-US"),ke=e=>ns.format(e),f=Math,Z=f.PI,c=f.abs,m=f.floor,d=f.round,p=f.ceil,v=f.min,h=f.max,z=f.pow,Re=f.sign,w=f.log10,He=f.log2,Zn=(e,t=1)=>f.sinh(e)*t,xe=(e,t=1)=>f.asinh(e/t),o=1/0;function Qn(e){return(w((e^e>>31)-(e>>31))|0)+1}function We(e,t,n){return v(h(e,t),n)}function Yn(e){return typeof e=="function"}function e(e){return Yn(e)?e:()=>e}Kn=()=>{},Ye=e=>e,Ge=(e,t)=>t,$n=e=>null,Qe=e=>!0,Ze=(e,t)=>e==t,In=/\.\d*?(?=9{6,}|0{6,})/gm,k=e=>{if(ht(e)||O.has(e))return e;const t=`${e}`,n=t.match(In);if(n==null)return e;let s=n[0].length-1;if(t.indexOf("e-")!=-1){let[e,n]=t.split("e");return+`${k(e)}e${n}`}return i(e,s)};function D(e,t){return k(i(k(e/t))*t)}function je(e,t){return k(p(k(e/t))*t)}function Hn(e,t){return k(m(k(e/t))*t)}function i(e,t=0){if(ht(e))return e;let n=10**t,s=e*n*(1+Number.EPSILON);return d(s)/n}O=new Map;function Pn(e){return((""+e).split(".")[1]||"").length}function G(e,t,n,s){let o=[],a=s.map(Pn);for(let r=t;r<n;r++){let l=c(r),d=i(z(e,r),l);for(let t=0;t<s.length;t++){let n=e==10?+`${s[t]}e${r}`:s[t]*d,c=(r>=0?0:l)+(r>=a[t]?0:a[t]),u=e==10?n:i(n,c);o.push(u),O.set(u,c)}}return o}U={},fe=[],F=[null,null],C=Array.isArray,ht=Number.isInteger,Rn=e=>e===0[0];function Ln(e){return typeof e=="string"}function ue(e){let t=!1;if(e!=null){let n=e.constructor;t=n==null||n==Object}return t}function Gs(e){return e!=null&&typeof e=="object"}Dn=Object.getPrototypeOf(Uint8Array),bt="__proto__";function K(e,t=ue){let n;if(C(e)){let s=e.find(e=>e!=null);if(C(s)||t(s)){n=Array(e.length);for(let s=0;s<e.length;s++)n[s]=K(e[s],t)}else n=e.slice()}else if(e instanceof Dn)n=e.slice();else if(t(e)){n={};for(let s in e)s!=bt&&(n[s]=K(e[s],t))}else n=e;return n}function l(e){let t=arguments;for(let n=1;n<t.length;n++){let s=t[n];for(let t in s)t!=bt&&(ue(e[t])?l(e[t],K(s[t])):e[t]=K(s[t]))}return e}zn=0,Fn=1,Mn=2;function Qs(e,t,n){for(let o=0,s,a=-1;o<t.length;o++){let i=t[o];if(i>a){for(s=i-1;s>=0&&e[s]==null;)e[s--]=null;for(s=i+1;s<n&&e[s]==null;)e[a=s++]=null}}}function ao(e,t){if(bo(e)){let t=e[0].slice();for(let n=1;n<e.length;n++)t.push(...e[n].slice(1));return jo(t[0])||(t=vo(t)),t}let o=new Set;for(let t=0;t<e.length;t++){let s=e[t],n=s[0],i=n.length;for(let e=0;e<i;e++)o.add(n[e])}let n=[Array.from(o).sort((e,t)=>e-t)],s=n[0].length,i=new Map;for(let e=0;e<s;e++)i.set(n[0][e],e);for(let o=0;o<e.length;o++){let a=e[o],r=a[0];for(let e=1;e<a.length;e++){let l=a[e],c=Array(s).fill(0[0]),d=t?t[o][e]:Fn,u=[];for(let e=0;e<l.length;e++){let t=l[e],n=i.get(r[e]);t===null?d!=zn&&(c[n]=t,d==Mn&&u.push(n)):c[n]=t}Qs(c,u,s),n.push(c)}}return n}an=typeof queueMicrotask=="undefined"?e=>Promise.resolve().then(e):queueMicrotask;function vo(e){let n=e[0],s=n.length,t=Array(s);for(let e=0;e<t.length;e++)t[e]=e;t.sort((e,t)=>n[e]-n[t]);let o=[];for(let n=0;n<e.length;n++){let a=e[n],i=Array(s);for(let e=0;e<s;e++)i[e]=a[t[e]];o.push(i)}return o}function bo(e){let t=e[0][0],n=t.length;for(let s=1;s<e.length;s++){let o=e[s][0];if(o.length!=n)return!1;if(o!=t)for(let e=0;e<n;e++)if(o[e]!=t[e])return!1}return!0}function jo(e,t=100){const o=e.length;if(o<=1)return!0;let n=0,s=o-1;for(;n<=s&&e[n]==null;)n++;for(;s>=n&&e[s]==null;)s--;if(s<=n)return!0;const i=h(1,m((s-n+1)/t));for(let a=e[n],t=n+i;t<=s;t+=i){const o=e[t];if(o!=null){if(o<=a)return!1;a=o}}return!0}Mt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ft=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function en(e){return e.slice(0,3)}Jt=Ft.map(en),Zt=Mt.map(en),Wt={MMMM:Mt,MMM:Zt,WWWW:Ft,WWW:Jt};function ee(e){return(e<10?"0":"")+e}function yo(e){return(e<10?"00":e<100?"0":"")+e}Gt={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,t)=>t.MMMM[e.getMonth()],MMM:(e,t)=>t.MMM[e.getMonth()],MM:e=>ee(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>ee(e.getDate()),D:e=>e.getDate(),WWWW:(e,t)=>t.WWWW[e.getDay()],WWW:(e,t)=>t.WWW[e.getDay()],HH:e=>ee(e.getHours()),H:e=>e.getHours(),h:e=>{let t=e.getHours();return t==0?12:t>12?t-12:t},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>ee(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>ee(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>yo(e.getMilliseconds())};function Ht(e,t){t=t||Wt;let n=[],o=/\{([a-z]+)\}|[^{]+/gi,s;for(;s=o.exec(e);)n.push(s[0][0]=="{"?Gt[s[1]]:s[0]);return e=>{let s="";for(let o=0;o<n.length;o++)s+=typeof n[o]=="string"?n[o]:n[o](e,t);return s}}Yt=(new Intl.DateTimeFormat).resolvedOptions().timeZone;function _o(e,t){let n;return t=="UTC"||t=="Etc/UTC"?n=new Date(+e+e.getTimezoneOffset()*6e4):t==Yt?n=e:(n=new Date(e.toLocaleString("en-US",{timeZone:t})),n.setMilliseconds(e.getMilliseconds())),n}Vt=e=>e%1==0,Q=[1,2,2.5,5],qn=G(10,-32,0,Q),rt=G(10,0,32,Q),Kt=rt.filter(Vt),E=qn.concat(rt),Oe=`
`,Pt="{YYYY}",Rt=Oe+Pt,Nt="{M}/{D}",Y=Oe+Nt,te=Y+"/{YY}",Tt="{aa}",tn="{h}:{mm}",T=tn+Tt,At=Oe+T,kt=":{ss}",s=null;function rn(e){let r=e*1e3,a=r*60,n=a*60,t=n*24,c=t*30,o=t*365,l=e==1?G(10,0,3,Q).filter(Vt):G(10,-3,0,Q),u=l.concat([r,r*5,r*10,r*15,r*30,a,a*5,a*10,a*15,a*30,n,n*2,n*3,n*4,n*6,n*8,n*12,t,t*2,t*3,t*4,t*5,t*6,t*7,t*8,t*9,t*10,t*15,c,c*2,c*3,c*4,c*6,o,o*2,o*5,o*10,o*25,o*50,o*100]);const h=[[o,Pt,s,s,s,s,s,s,1],[t*28,"{MMM}",Rt,s,s,s,s,s,1],[t,Nt,Rt,s,s,s,s,s,1],[n,"{h}"+Tt,te,s,Y,s,s,s,1],[a,T,te,s,Y,s,s,s,1],[r,kt,te+" "+T,s,Y+" "+T,s,At,s,1],[e,kt+".{fff}",te+" "+T,s,Y+" "+T,s,At,s,1]];function f(s){return(r,l,u,h,f,p)=>{let g=[],v=f>=o,y=f>=c&&f<o,b=s(u),j=i(b*e,3),_=Ct(b.getFullYear(),v?0:b.getMonth(),y||v?1:b.getDate()),w=i(_*e,3);if(y||v){let n=y?f/c:0,a=v?f/o:0,t=j==w?j:i(Ct(_.getFullYear()+a,_.getMonth()+n,1)*e,3),r=new Date(d(t/e)),l=r.getFullYear(),u=r.getMonth();for(let o=0;t<=h;o++){let r=Ct(l+a*o,u+n*o,1),c=r-s(i(r*e,3));t=i((+r+c)*e,3),t<=h&&g.push(t)}}else{let b=f>=t?t:f,y=m(u)-m(j),o=w+y+je(j-w,b);g.push(o);let c=s(o),d=c.getHours()+c.getMinutes()/a+c.getSeconds()/n,v=f/n,_=r.axes[l]._space,O=p/_;for(;1;){if(o=i(o+f,e==1?0:3),o>h)break;if(v>1){let t=m(i(d+v,6))%24,a=s(o),r=a.getHours(),e=r-t;e>1&&(e=-1),o-=e*n,d=(d+v)%24;let c=g[g.length-1],l=i((o-c)/f,3);l*O>=.7&&g.push(o)}else g.push(o)}}return g}}return[u,h,f]}var[go,po,fo]=rn(1),r,Xt,sn,dn,hn,mn,kn,Un,rs,A,ls,ds,js,ws,Ms,Ss,As,ks,Es,Fe,Os,B,$,W,Pe,N,Ee,Ae,De,Me,dt,he,ze,Ne,et,_s,ys,yt,X,be,S,_e,R,bs,n,Se,It,zt,xt,re,ps,pt,mt,oe,us,ae,nt,V,cs,ns,ke,c,d,h,m,f,p,v,z,$n,Qe,Ze,In,O,k,U,fe,C,F,Z,Re,w,He,Zn,xe,o,Kn,Ye,Ge,ht,Rn,Dn,bt,zn,Fn,Mn,an,Mt,Ft,Jt,Zt,Wt,Gt,Yt,Vt,Q,qn,rt,Kt,E,Oe,Pt,Rt,Nt,Y,te,Tt,tn,T,At,kt,s,Qt,jn,On,ve,Tn,_t,de,gt,ft,ie,at,st,Je,Bn,Vn,Xe,Ue,Gn,Xn,$e,Ce,Le,Ie,Be,tt,it,lt,hs,vt,I,me,J,ne,M,P,se,pe,ct,Te,ut,jt,ts,es,le,Nn,Sn,Cn,wn,vn,St,un,q,Dt,Bt,[mo,ho,uo]=rn(.001);G(2,-53,53,[1]);function fn(e,t){return e.map(e=>e.map((n,s)=>s==0||s==8||n==null?n:t(s==1||e[8]==0?n:e[1]+n)))}function pn(e,t){return(n,s,o,i,a)=>{let r=t.find(e=>a>=e[0])||t[t.length-1],c,l,d,u,h,m;return s.map(t=>{let n=e(t),s=n.getFullYear(),o=n.getMonth(),i=n.getDate(),a=n.getHours(),f=n.getMinutes(),p=n.getSeconds(),g=s!=c&&r[2]||o!=l&&r[3]||i!=d&&r[4]||a!=u&&r[5]||f!=h&&r[6]||p!=m&&r[7]||r[1];return c=s,l=o,d=i,u=a,h=f,m=p,g(n)})}}function co(e,t){let n=Ht(t);return(t,s)=>s.map(t=>n(e(t)))}function Ct(e,t,n){return new Date(e,t,n)}function bn(e,t){return t(e)}jn="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function yn(e,t){return(n,s,o,i)=>i==null?be:t(e(s))}function io(e,t){let n=e.series[t];return n.width?n.stroke(e,t):n.points.width?n.points.stroke(e,t):null}function oo(e,t){return e.series[t].fill(e,t)}On={show:!0,live:!0,isolate:!1,mount:Kn,markers:{show:!0,width:2,stroke:io,fill:oo,dash:"solid"},idx:null,idxs:null,values:[]};function so(e,t){let o=e.cursor.points,n=b(),s=o.size(e,t);a(n,W,s),a(n,$,s);let i=s/-2;a(n,"marginLeft",i),a(n,"marginTop",i);let r=o.width(e,t,s);return r&&a(n,"borderWidth",r),n}function to(e,t){let n=e.series[t].points;return n._fill||n._stroke}function eo(e,t){let n=e.series[t].points;return n._stroke||n._fill}function Js(e,t){let n=e.series[t].points;return n.size}ve=[0,0];function Xs(e,t,n){return ve[0]=t,ve[1]=n,ve}function ce(e,t,n,s=!0){return e=>{e.button==0&&(!s||e.target==t)&&n(e)}}function wt(e,t,n,s=!0){return e=>{(!s||e.target==t)&&n(e)}}Tn={show:!0,x:!0,y:!0,lock:!1,move:Xs,points:{one:!1,show:so,size:Js,width:0,stroke:eo,fill:to},bind:{mousedown:ce,mouseup:ce,click:ce,dblclick:ce,mousemove:wt,mouseleave:wt,mouseenter:wt},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(e,t)=>{t.stopPropagation(),t.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(e,t,n,s,o)=>s-o,prox:-1,bias:0},hover:{skip:[0[0]],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},_t={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},de=l({},_t,{filter:Ge}),gt=l({},de,{size:10}),ft=l({},_t,{show:!1}),ie='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',at="bold "+ie,st=1.5,Je={show:!0,scale:"x",stroke:Ae,space:50,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:at,side:2,grid:de,ticks:gt,border:ft,font:ie,lineGap:st,rotate:0},Bn="Value",Vn="Time",Xe={show:!0,scale:"x",auto:!1,sorted:1,min:o,max:-o,idxs:[]};function Ys(e,t){return t.map(e=>e==null?"":ke(e))}function qs(e,t,n,s,o,a,r){let c=[],l=O.get(o)||0;n=r?n:i(je(n,o),l);for(let e=n;e<=s;e=i(e+o,l))c.push(Object.is(e,-0)?0:e);return c}function qe(e,t,n,s,o){const u=[],l=e.scales[e.axes[t].scale].log,h=l==10?w:He,f=m(h(n));o=z(l,f),l==10&&(o=E[j(o,E)]);let c=n,d=o*l;l==10&&(d=E[j(d,E)]);do u.push(c),c=c+o,l==10&&!O.has(c)&&(c=i(c,O.get(o))),c>=d&&(o=c,d=o*l,l==10&&(d=E[j(d,E)]));while(c<=s)return u}function Vs(e,t,n,s,o){let c=e.scales[e.axes[t].scale],r=c.asinh,l=s>r?qe(e,t,h(r,n),s,o):[r],d=s>=0&&n<=0?[0]:[],u=n<-r?qe(e,t,h(r,-s),-n,o):[r];return u.reverse().map(e=>-e).concat(d,l)}Ue=/./,Gn=/[12357]/,Xn=/[125]/,$e=/1/,Ce=(e,t,n,s)=>e.map((e,o)=>t==4&&e==0||o%s==0&&n.test(e.toExponential()[e<0?1:0])?e:null);function Is(e,t,n){let u=e.axes[n],i=u.scale,h=e.scales[i],a=e.valToPos,r=u._space,l=a(10,i),d=a(9,i)-l>=r?Ue:a(7,i)-l>=r?Gn:a(5,i)-l>=r?Xn:$e;if(d==$e){let e=c(a(1,i)-l);if(e<r)return Ce(t.slice().reverse(),h.distr,d,p(r/e)).reverse()}return Ce(t,h.distr,d,1)}function Hs(e,t,n){let i=e.axes[n],a=i.scale,r=i._space,l=e.valToPos,d=c(l(1,a)-l(2,a));return d<r?Ce(t.slice().reverse(),3,Ue,p(r/d)).reverse():t}function Ps(e,t,n,s){return s==null?be:t==null?"":ke(t)}Le={show:!0,scale:"y",stroke:Ae,space:30,gap:5,alignTo:1,size:50,labelGap:0,labelSize:30,labelFont:at,side:3,grid:de,ticks:gt,border:ft,font:ie,lineGap:st,rotate:0};function Rs(e,t){let n=3+(e||1)*2;return i(n*t,3)}function Ls(e,t){let{scale:o,idxs:s}=e.series[0],i=e._data[0],a=e.valToPos(i[s[0]],o,!0),r=e.valToPos(i[s[1]],o,!0),l=c(r-a),d=e.series[t],u=l/(d.points.space*n);return s[1]-s[0]<=u}Ie={scale:null,auto:!0,sorted:0,min:o,max:-o},Be=(e,t,n,s,o)=>o,tt={show:!0,auto:!0,sorted:0,gaps:Be,alpha:1,facets:[l({},Ie,{scale:"x"}),l({},Ie,{scale:"y"})]},it={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:Be,alpha:1,points:{show:Ls,filter:null},values:null,min:o,max:-o,idxs:[],path:null,clip:null};function zs(e,t,n){return n/10}lt={time:Qt,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},hs=l({},lt,{time:!1,ori:1}),vt={};function fs(e){let n=vt[e];return n||(n={key:e,plots:[],sub(e){n.plots.push(e)},unsub(e){n.plots=n.plots.filter(t=>t!=e)},pub(e,t,s,o,i,a,r){for(let c=0;c<n.plots.length;c++)n.plots[c]!=t&&n.plots[c].pub(e,t,s,o,i,a,r)}},e!=null&&(vt[e]=n)),n}I=1<<0,me=1<<1;function L(e,t,n){const o=e.mode,s=e.series[t],r=o==2?e._data[t]:e._data,i=e.scales,a=e.bbox;let d=r[0],l=o==2?r[1]:r[t],c=o==2?i[s.facets[0].scale]:i[e.series[0].scale],u=o==2?i[s.facets[1].scale]:i[s.scale],h=a.left,m=a.top,f=a.width,p=a.height,g=e.valToPosH,v=e.valToPosV;return c.ori==0?n(s,d,l,c,u,g,v,h,m,f,p,J,P,se,ct,ut):n(s,d,l,c,u,v,g,m,h,p,f,ne,M,pe,Te,jt)}function Lt(e,n){let o=0,s=0,i=t(e.bands,fe);for(let t=0;t<i.length;t++){let e=i[t];e.series[0]==n?o=e.dir:e.series[1]==n&&(e.dir==1?s|=1:s|=2)}return[o,s==1?-1:s==2?1:s==3?2:0]}function Ts(e,t,n,s,o){let r=e.mode,a=e.series[t],c=r==2?a.facets[1].scale:a.scale,i=e.scales[c];return o==-1?i.min:o==1?i.max:i.distr==3?i.dir==1?i.min:i.max:0}function x(e,t,n,s,o,i){return L(e,t,(e,t,a,r,c,l,d,u,h,m,f)=>{let p=e.pxRound;const w=r.dir*(r.ori==0?1:-1),b=r.ori==0?P:M;let g,j;w==1?(g=n,j=s):(g=s,j=n);let y=p(l(t[g],r,m,u)),O=p(d(a[g],c,f,h)),x=p(l(t[j],r,m,u)),_=p(d(i==1?c.max:c.min,c,f,h)),v=new Path2D(o);return b(v,x,_),b(v,y,_),b(v,y,O),v})}function ye(e,t,n,s,o,i){let a=null;if(e.length>0){a=new Path2D;const c=t==0?se:pe;let r=n;for(let n=0;n<e.length;n++){let t=e[n];if(t[1]>t[0]){let e=t[0]-r;e>0&&c(a,r,s,e,s+i),r=t[1]}}let l=n+o-r,d=10;l>0&&c(a,r,s-d/2,l,s+i+d)}return a}function Fs(e,t,n){let s=e[e.length-1];s&&s[0]==t?s[1]=n:e.push([t,n])}function Ve(e,t,n,s,o,i,a){let r=[],c=e.length;for(let l=o==1?n:s;l>=n&&l<=s;l+=o){let d=t[l];if(d===null){let m=l,d=l;if(o==1)for(;++l<=s&&t[l]===null;)d=l;else for(;--l>=n&&t[l]===null;)d=l;let u=i(e[m]),h=d==m?u:i(e[d]),f=m-o,g=a<=0&&f>=0&&f<c?i(e[f]):u;u=g;let p=d+o,v=a>=0&&p>=0&&p<c?i(e[p]):h;h=v,h>=u&&r.push([u,h])}}return r}function xs(e){return e==0?Ye:e==1?d:t=>D(t,e)}function Cs(e){let n=e==0?J:ne,t=e==0?(e,t,n,s,o,i)=>{e.arcTo(t,n,s,o,i)}:(e,t,n,s,o,i)=>{e.arcTo(n,t,o,s,i)},s=e==0?(e,t,n,s,o)=>{e.rect(t,n,s,o)}:(e,t,n,s,o)=>{e.rect(n,t,o,s)};return(e,o,i,a,r,c=0,l=0)=>{c==0&&l==0?s(e,o,i,a,r):(c=v(c,a/2,r/2),l=v(l,a/2,r/2),n(e,o+c,i),t(e,o+a,i,o+a,i+r,c),t(e,o+a,i+r,o,i+r,l),t(e,o,i+r,o,i,l),t(e,o,i,o+a,i,c),e.closePath())}}J=(e,t,n)=>{e.moveTo(t,n)},ne=(e,t,n)=>{e.moveTo(n,t)},P=(e,t,n)=>{e.lineTo(t,n)},M=(e,t,n)=>{e.lineTo(n,t)},se=Cs(0),pe=Cs(1),ct=(e,t,n,s,o,i)=>{e.arc(t,n,s,o,i)},Te=(e,t,n,s,o,i)=>{e.arc(n,t,s,o,i)},ut=(e,t,n,s,o,i,a)=>{e.bezierCurveTo(t,n,s,o,i,a)},jt=(e,t,n,s,o,i,a)=>{e.bezierCurveTo(n,t,o,s,a,i)};function os(){return(e,t,s,o,a)=>L(e,t,(t,r,c,l,d,u,h,m,f,p,g)=>{let{pxRound:O,points:w}=t,_,j;l.ori==0?(_=J,j=ct):(_=ne,j=Te);const E=i(w.width*n,3);let y=(w.size-w.width)/2*n,v=i(y*2,3),b=new Path2D,x=new Path2D,{left:k,top:A,width:S,height:M}=e.bbox;se(x,k-v,A-v,S+v*2,M+v*2);const C=e=>{if(c[e]!=null){let t=O(u(r[e],l,p,m)),n=O(h(c[e],d,g,f));_(b,t+y,n),j(b,t,n,y,0,Z*2)}};if(a)a.forEach(C);else for(let e=s;e<=o;e++)C(e);return{stroke:E>0?b:null,fill:b,clip:x,flags:I|me}})}function ss(e){return(t,n,s,o,i,a)=>{s!=o&&(i!=s&&a!=s&&e(t,n,s),i!=o&&a!=o&&e(t,n,o),e(t,n,a))}}ts=ss(P),es=ss(M);function Jn(e){const n=t(e?.alignGaps,0);return(e,t,s,o)=>L(e,t,(i,a,r,c,l,d,u,h,m,f,p)=>{[s,o]=oe(r,s,o);let E=i.pxRound,j=e=>E(d(e,c,f,h)),g=e=>E(u(e,l,p,m)),y,w;c.ori==0?(y=P,w=ts):(y=M,w=es);const v=c.dir*(c.ori==0?1:-1),_={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:I},b=_.stroke;let O=!1;const A=o-s>=f*4;if(A){let h=t=>e.posToVal(t,c.key,!0),n=null,i=null,d,t,m,l=j(a[v==1?s:o]),f=j(a[s]),p=j(a[o]),u=h(v==1?f+1:p-1);for(let c=v==1?s:o;c>=s&&c<=o;c+=v){let f=a[c],p=v==1?f<u:f>u,m=p?l:j(f),e=r[c];m==l?e!=null?(t=e,n==null?(y(b,m,g(t)),d=n=i=t):t<n?n=t:t>i&&(i=t)):e===null&&(O=!0):(n!=null&&w(b,l,g(n),g(i),g(d),g(t)),e!=null?(t=e,y(b,m,g(t)),n=i=d=t):(n=i=null,e===null&&(O=!0)),l=m,u=h(l+v))}n!=null&&n!=i&&m!=l&&w(b,l,g(n),g(i),g(d),g(t))}else for(let e=v==1?s:o;e>=s&&e<=o;e+=v){let t=r[e];t===null?O=!0:t!=null&&y(b,j(a[e]),g(t))}let[k,C]=Lt(e,t);if(i.fill!=null||k!=0){let c=_.fill=new Path2D(b),d=i.fillTo(e,t,i.min,i.max,k),l=g(d),n=j(a[s]),r=j(a[o]);v==-1&&([r,n]=[n,r]),y(c,r,l),y(c,n,l)}if(!i.spanGaps){let l=[];O&&l.push(...Ve(a,r,s,o,v,j,n)),_.gaps=l=i.gaps(e,t,s,o,l),_.clip=ye(l,c.ori,h,m,f,p)}return C!=0&&(_.band=C==2?[x(e,t,s,o,b,-1),x(e,t,s,o,b,1)]:x(e,t,s,o,b,C)),_})}function Bs(e){const s=t(e.align,1),o=t(e.ascDesc,!1),a=t(e.alignGaps,0),i=t(e.extend,!1);return(e,t,r,c)=>L(e,t,(l,d,u,h,m,f,p,g,v,b,j)=>{[r,c]=oe(u,r,c);let D=l.pxRound,{left:N,width:R}=e.bbox,k=e=>D(f(e,h,b,g)),E=e=>D(p(e,m,j,v)),_=h.ori==0?P:M;const w={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:I},y=w.stroke,C=h.dir*(h.ori==0?1:-1);let O=E(u[C==1?r:c]),A=k(d[C==1?r:c]),S=A,F=A;i&&s==-1&&(F=N,_(y,F,O)),_(y,A,O);for(let e=C==1?r:c;e>=r&&e<=c;e+=C){let o=u[e];if(o==null)continue;let t=k(d[e]),n=E(o);s==1?_(y,t,O):_(y,S,n),_(y,t,n),O=n,S=t}let T=S;i&&s==1&&(T=N+R,_(y,T,O));let[L,z]=Lt(e,t);if(l.fill!=null||L!=0){let n=w.fill=new Path2D(y),o=l.fillTo(e,t,l.min,l.max,L),s=E(o);_(n,T,s),_(n,F,s)}if(!l.spanGaps){let i=[];i.push(...Ve(d,u,r,c,C,k,a));let m=l.width*n/2,f=o||s==1?m:-m,p=o||s==-1?-m:m;i.forEach(e=>{e[0]+=f,e[1]+=p}),w.gaps=i=l.gaps(e,t,r,c,i),w.clip=ye(i,h.ori,g,v,b,j)}return z!=0&&(w.band=z==2?[x(e,t,r,c,y,-1),x(e,t,r,c,y,1)]:x(e,t,r,c,y,z)),w})}function Ut(e,t,n,s,i,a,r=o){if(e.length>1){let o=null;for(let l=0,d=1/0;l<e.length;l++)if(t[l]!==0[0]){if(o!=null){let t=c(e[l]-e[o]);t<d&&(d=t,r=c(n(e[l],s,i,a)-n(e[o],s,i,a)))}o=l}}return r}function $s(s){s=s||U;const r=t(s.size,[.6,o,1]),f=s.align||0,p=s.gap||0;let i=s.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const c=e(i),g=1-r[0],b=t(r[1],o),j=t(r[2],1),a=t(s.disp,U),l=t(s.each,e=>{}),{fill:d,stroke:u}=a;return(e,s,o,i)=>L(e,s,(r,y,_,w,O,x,C,E,k,A,S)=>{let D=r.pxRound,L=f,Z=p*n,ae=b*n,ce=j*n,G,Y;w.ori==0?[G,Y]=c(e,s):[Y,G]=c(e,s);const B=w.dir*(w.ori==0?1:-1);let U=w.ori==0?se:pe,ie=w.ori==0?l:(e,t,n,s,o,i,a)=>{l(e,t,n,o,s,a,i)},I=t(e.bands,fe).find(e=>e.series[0]==s),le=I!=null?I.dir:0,J=r.fillTo(e,s,r.min,r.max,le),q=D(C(J,O,S,k)),te,F,T,z=A,M=D(r.width*n),N=!1,H=null,P=null,V=null,$=null;d!=null&&(M==0||u!=null)&&(N=!0,H=d.values(e,s,o,i),P=new Map,new Set(H).forEach(e=>{e!=null&&P.set(e,new Path2D)}),M>0&&(V=u.values(e,s,o,i),$=new Map,new Set(V).forEach(e=>{e!=null&&$.set(e,new Path2D)})));let{x0:X,size:Q}=a;if(X!=null&&Q!=null){L=1,y=X.values(e,s,o,i),X.unit==2&&(y=y.map(t=>e.posToVal(E+t*A,w.key,!0)));let t=Q.values(e,s,o,i);Q.unit==2?F=t[0]*A:F=x(t[0],w,A,E)-x(0,w,A,E),z=Ut(y,_,x,w,A,E,z);let n=z-F;T=n+Z}else{z=Ut(y,_,x,w,A,E,z);let e=z*g;T=e+Z,F=z-T}T<1&&(T=0),M>=F/2&&(M=0),T<5&&(D=Ye);let oe=T>0,re=z-T-(oe?M:0);F=D(We(re,ce,ae)),te=(L==0?F/2:L==B?0:F)-L*B*((L==0?Z/2:0)+(oe?M/2:0));const R={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},K=N?null:new Path2D;let W=null;if(I!=null)W=e.data[I.series[1]];else{let{y0:t,y1:n}=a;t!=null&&n!=null&&(_=n.values(e,s,o,i),W=t.values(e,s,o,i))}let ne=G*F,ee=Y*F;for(let n=B==1?o:i;n>=o&&n<=i;n+=B){let r=_[n];if(r==null)continue;if(W!=null){let e=W[n]??0;if(r-e==0)continue;q=C(e,O,S,k)}let f=w.distr!=2||a!=null?y[n]:n,p=x(f,w,A,E),u=C(t(r,J),O,S,k),l=D(p-te),g=D(h(u,q)),c=D(v(u,q)),d=g-c;if(r!=null){let t=r<0?ee:ne,o=r<0?ne:ee;N?(M>0&&V[n]!=null&&U($.get(V[n]),l,c+m(M/2),F,h(0,d-M),t,o),H[n]!=null&&U(P.get(H[n]),l,c+m(M/2),F,h(0,d-M),t,o)):U(K,l,c+m(M/2),F,h(0,d-M),t,o),ie(e,s,n,l-M/2,c,F+M,d)}}return M>0?R.stroke=N?$:K:N||(R._fill=r.width==0?r._fill:r._stroke??r._fill,R.width=0),R.fill=N?P:K,R})}function Ws(e,n){const s=t(n?.alignGaps,0);return(t,n,o,i)=>L(t,n,(a,r,c,l,d,u,h,m,f,p,g)=>{[o,i]=oe(c,o,i);let O=a.pxRound,C=e=>O(u(e,l,p,m)),T=e=>O(h(e,d,g,f)),_,w,b;l.ori==0?(_=J,b=P,w=ut):(_=ne,b=M,w=jt);const y=l.dir*(l.ori==0?1:-1);let k=C(r[y==1?o:i]),A=k,S=[],F=[];for(let e=y==1?o:i;e>=o&&e<=i;e+=y){let t=c[e];if(t!=null){let t=r[e],n=C(t);S.push(A=n),F.push(T(c[e]))}}const v={stroke:e(S,F,_,b,w,O),fill:null,clip:null,band:null,gaps:null,flags:I},j=v.stroke;let[z,E]=Lt(t,n);if(a.fill!=null||z!=0){let e=v.fill=new Path2D(j),o=a.fillTo(t,n,a.min,a.max,z),s=T(o);b(e,A,s),b(e,k,s)}if(!a.spanGaps){let e=[];e.push(...Ve(r,c,o,i,y,C,s)),v.gaps=e=a.gaps(t,n,o,i,e),v.clip=ye(e,l.ori,m,f,p,g)}return E!=0&&(v.band=E==2?[x(t,n,o,i,j,-1),x(t,n,o,i,j,1)]:x(t,n,o,i,j,E)),v})}function Us(e){return Ws(Ks,e)}function Ks(e,t,n,s,o){const a=e.length;if(a<2)return null;const r=new Path2D;if(n(r,e[0],t[0]),a==2)s(r,e[1],t[1]);else{let i=Array(a),s=Array(a-1),c=Array(a-1),n=Array(a-1);for(let o=0;o<a-1;o++)c[o]=t[o+1]-t[o],n[o]=e[o+1]-e[o],s[o]=c[o]/n[o];i[0]=s[0];for(let e=1;e<a-1;e++)s[e]===0||s[e-1]===0||s[e-1]>0!==s[e]>0?i[e]=0:(i[e]=3*(n[e-1]+n[e])/((2*n[e]+n[e-1])/s[e-1]+(n[e]+2*n[e-1])/s[e]),isFinite(i[e])||(i[e]=0));i[a-1]=s[a-2];for(let s=0;s<a-1;s++)o(r,e[s]+n[s]/3,t[s]+i[s]*n[s]/3,e[s+1]-n[s]/3,t[s+1]-i[s+1]*n[s]/3,e[s+1],t[s+1])}return r}le=new Set;function Wn(){for(let e of le)e.syncRect(!0)}S&&(H(_s,R,Wn),H(ys,R,Wn,!0),H(X,R,()=>{u.pxRatio=n})),Nn=Jn(),Sn=os();function An(e,t,n,s){let o=s?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1));return o.map((e,s)=>Et(e,s,t,n))}function Zs(e,t){return e.map((e,n)=>n==0?{}:l({},t,e))}function Et(e,t,n,s){return l({},t==0?n:s,e)}function En(e,t,n){return t==null?F:[t,n]}Cn=En;function no(e,t,n){return t==null?F:we(t,n,ae,!0)}function xn(e,t,n,s){return t==null?F:ge(t,n,e.scales[s].log,!1)}wn=xn;function _n(e,t,n,s){return t==null?F:ot(t,n,e.scales[s].log,!1)}vn=_n;function ro(e,t,n,s,o){let r=h(Qn(e),Qn(t)),i=t-e,a=j(o/s*i,n);do{let e=n[a],t=s*e/i;if(t>=o&&r+(e<5?O.get(e):0)<=17)return[e,t]}while(++a<n.length)return[0,0]}function gn(e){let t,s;return e=e.replace(/(\d+)px/,(e,o)=>(t=d((s=+o)*n))+"px"),[e,t,s]}function lo(e){e.show&&[e.font,e.labelFont].forEach(e=>{let t=i(e[2]*n,1);e[0]=e[0].replace(/[0-9.]+px/,t+"px"),e[1]=t})}function u(s,r,u){const m={mode:t(s.mode,1)},P=m.mode;function en(e,t,n,s){let o=t.valToPct(e);return s+n*(t.dir==-1?1-o:o)}function tn(e,t,n,s){let o=t.valToPct(e);return s+n*(t.dir==-1?o:1-o)}function so(e,t,n,s){return t.ori==0?en(e,t,n,s):tn(e,t,n,s)}m.valToPosH=en,m.valToPosV=tn;let Go=!1;m.status=0;const Ye=m.root=b(Xt);if(s.id!=null&&(Ye.id=s.id),g(Ye,s.class),s.title){let e=b(hn,Ye);e.textContent=s.title}const St=y("canvas"),f=m.ctx=St.getContext("2d"),xt=b(mn,Ye);H("click",xt,e=>{if(e.target===ve){let t=q!=It||Y!=Yt;t&&re.click(m,e)}},!0);const rn=m.under=b(kn,xt);xt.appendChild(St);const ve=m.over=b(Un,xt);s=K(s);const Hn=+t(s.pxAlign,1),Ho=xs(Hn);(s.plugins||[]).forEach(e=>{e.opts&&(s=e.opts(m,s)||s)});const Fn=s.ms||.001,k=m.series=P==1?An(s.series||[],Xe,it,!1):Zs(s.series||[null],tt),He=m.axes=An(s.axes||[],Je,Le,!0),L=m.scales={},yt=m.bands=s.bands||[];yt.forEach(n=>{n.fill=e(n.fill||null),n.dir=t(n.dir,-1)});const G=P==2?k[1].facets[0].scale:k[0].scale,ri={axes:ki,series:Di},ci=(s.drawOrder||["axes","series"]).map(e=>ri[e]);function Yo(e){const t=e.distr==3?t=>w(t>0?t:e.clamp(m,t,e.min,e.max,e.key)):e.distr==4?t=>xe(t,e.asinh):e.distr==100?t=>e.fwd(t):e=>e;return n=>{let o=t(n),{_min:s,_max:i}=e,a=i-s;return(o-s)/a}}function Pt(t){let n=L[t];if(n==null){let o=(s.scales||U)[t]||U;if(o.from!=null){Pt(o.from);let e=l({},L[o.from],o,{key:t});e.valToPct=Yo(e),L[t]=e}else{n=L[t]=l({},t==G?lt:hs,o),n.key=t;let a=n.time,s=n.range,i=C(s);if((t!=G||P==2&&!a)&&(i&&(s[0]==null||s[1]==null)&&(s={min:s[0]==null?nt:{mode:1,hard:s[0],soft:s[0]},max:s[1]==null?nt:{mode:1,hard:s[1],soft:s[1]}},i=!1),!i&&ue(s))){let e=s;s=(t,n,s)=>n==null?F:we(n,s,e)}n.range=e(s||(a?Cn:t==G?n.distr==3?wn:n.distr==4?vn:En:n.distr==3?xn:n.distr==4?_n:no)),n.auto=e(!i&&n.auto),n.clamp=e(n.clamp||zs),n._min=n._max=null,n.valToPct=Yo(n)}}}Pt("x"),Pt("y"),P==1&&k.forEach(e=>{Pt(e.scale)}),He.forEach(e=>{Pt(e.scale)});for(let e in s.scales)Pt(e);const T=L[G],Vt=T.distr;let Ve,Zt;T.ori==0?(g(Ye,sn),Ve=en,Zt=tn):(g(Ye,dn),Ve=tn,Zt=en);const ee={};for(let t in L){let e=L[t];(e.min!=null||e.max!=null)&&(ee[t]={min:e.min,max:e.max},e.min=e.max=null)}const bt=s.tzDate||(e=>new Date(d(e/Fn))),Wn=s.fmtDate||Ht,vi=Fn==1?fo(bt):uo(bt),bi=pn(bt,fn(Fn==1?po:ho,Wn)),ji=yn(bt,bn(jn,Wn)),Ae=[],J=m.legend=l({},On,s.legend),x=m.cursor=l({},Tn,{drag:{y:P==2}},s.cursor),$e=J.show,Te=x.show,de=J.markers;J.idxs=Ae,de.width=e(de.width),de.dash=e(de.dash),de.stroke=e(de.stroke),de.fill=e(de.fill);let ut,Io,Kn,Ft=[],Qs=[],qn,Ct=!1,io={};if(J.live){const e=k[1]?k[1].values:null;Ct=e!=null,qn=Ct?e(m,1,0):{_:0};for(let e in qn)io[e]=be}if($e)if(ut=y("table",Ms,Ye),Kn=y("tbody",null,ut),J.mount(m,ut),Ct){Io=y("thead",null,ut,Kn);let e=y("tr",null,Io);y("th",null,e);for(var yi in qn)y("th",Fe,e).textContent=yi}else g(ut,As),J.live&&g(ut,Ss);const Mo={show:!0},_i={show:!1};function xi(e,t){if(t==0&&(Ct||!J.live||P==2))return F;let i=[],n=y("tr",ks,Kn,Kn.childNodes[t]);g(n,e.class),e.show||g(n,A);let s=y("th",null,n);if(de.show){let e=b(Es,s);if(t>0){let n=de.width(m,t);n&&(e.style.border=n+"px "+de.dash(m,t)+" "+de.stroke(m,t)),e.style.background=de.fill(m,t)}}let o=b(Fe,s);e.label instanceof HTMLElement?o.appendChild(e.label):o.textContent=e.label,t>0&&(de.show||(o.style.color=e.width>0?de.stroke(m,t):de.fill(m,t)),st("click",s,t=>{if(x._lock)return;kt(t);let n=k.indexOf(e);if((t.ctrlKey||t.metaKey)!=J.isolate){let e=k.some((e,t)=>t>0&&t!=n&&e.show);k.forEach((t,s)=>{s>0&&Be(s,e?s==n?Mo:_i:Mo,!0,Q.setSeries)})}else Be(n,{show:!e.show},!0,Q.setSeries)},!1),qt&&st(ze,s,t=>{if(x._lock)return;kt(t),Be(k.indexOf(e),Dt,!0,Q.setSeries)},!1));for(var a in qn){let e=y("td",Os,n);e.textContent="--",i.push(e)}return[n,i]}const Qt=new Map;function st(e,t,n,s=!0){const o=Qt.get(t)||{},i=x.bind[e](m,t,n,s);i&&(H(e,t,o[e]=i),Qt.set(t,o))}function Eo(e,t){const s=Qt.get(t)||{};for(let n in s)(e==null||n==e)&&(Ot(n,t,s[n]),delete s[n]);e==null&&Qt.delete(t)}let Gn=0,ss=0,S=0,M=0,Oe=0,ye=0,Po=Oe,_o=ye,to=S,Xs=M,_t=0,jt=0,ft=0,gt=0;m.bbox={};let Ls=!1,zn=!1,Mt=!1,vt=!1,Dn=!1,ke=!1;function Cs(e,t,n){(n||e!=m.width||t!=m.height)&&qo(e,t),zt(!1),Mt=!0,zn=!0,Nt()}function qo(e,t){m.width=Gn=S=e,m.height=ss=M=t,Oe=ye=0,Li(),wi();let s=m.bbox;_t=s.left=D(Oe*n,.5),jt=s.top=D(ye*n,.5),ft=s.width=D(S*n,.5),gt=s.height=D(M*n,.5)}const Mi=3;function Fi(){let t=!1,e=0;for(;!t;){e++;let n=Ai(e),s=ni(e);t=e==Mi||n&&s,t||(qo(m.width,m.height),zn=!0)}}function zi({width:e,height:t}){Cs(e,t)}m.setSize=zi;function Li(){let e=!1,t=!1,n=!1,s=!1;He.forEach((o)=>{if(o.show&&o._show){let{side:a,_size:r}=o,c=a%2,l=o.label!=null?o.labelSize:0,i=r+l;i>0&&(c?(S-=i,a==3?(Oe+=i,s=!0):n=!0):(M-=i,a==0?(ye+=i,e=!0):t=!0))}}),pt[0]=e,pt[1]=n,pt[2]=t,pt[3]=s,S-=rt[1]+rt[3],Oe+=rt[3],M-=rt[2]+rt[0],ye+=rt[0]}function wi(){let e=Oe+S,t=ye+M,n=Oe,s=ye;function o(o,i){switch(o){case 1:return e+=i,e-i;case 2:return t+=i,t-i;case 3:return n-=i,n+i;case 0:return s-=i,s+i}}He.forEach((e)=>{if(e.show&&e._show){let t=e.side;e._pos=o(t,e._size),e.label!=null&&(e._lpos=o(t,e.labelSize))}})}if(x.dataIdx==null){let t=x.hover,n=t.skip=new Set(t.skip??[]);n.add(0[0]);let i=t.prox=e(t.prox),s=t.bias??(t.bias=0);x.dataIdx=(e,t,a,l)=>{if(t==0)return a;let d=a,u=i(e,t,a,l)??o,g=u>=0&&u<o,m=T.ori==0?S:M,f=x.left,p=r[0],h=r[t];if(n.has(h[a])){{d=null;let e=null,t=null,o;if(s==0||s==-1)for(o=a;e==null&&o-- >0;)n.has(h[o])||(e=o);if(s==0||s==1)for(o=a;t==null&&o++<h.length;)n.has(h[o])||(t=o);if(e!=null||t!=null)if(g){let o=e==null?-(1/0):Ve(p[e],T,m,0),i=t==null?1/0:Ve(p[t],T,m,0),n=f-o,s=i-f;n<=s?n<=u&&(d=e):s<=u&&(d=t)}else d=t==null?e:e==null?t:a-e<=t-a?e:t}}else if(g){let e=c(f-Ve(p[a],T,m,0));e>u&&(d=null)}return d}}const kt=e=>{x.event=e};x.idxs=Ae,x._lock=!1;let pe=x.points;pe.show=e(pe.show),pe.size=e(pe.size),pe.stroke=e(pe.stroke),pe.width=e(pe.width),pe.fill=e(pe.fill);const Re=m.focus=l({},s.focus||{alpha:.3},x.focus),qt=Re.prox>=0,Ut=qt&&pe.one;let Ce=[],$t=[],Bt=[];function Zo(e,t){let n=pe.show(m,t);if(n instanceof HTMLElement)return g(n,ws),g(n,e.class),_(n,-10,-10,S,M),ve.insertBefore(n,Ce[t]),n}function Jo(n,s){if(P==1||s>0){let t=P==1&&L[n.scale].time,e=n.value;n.value=t?Ln(e)?yn(bt,bn(e,Wn)):e||ji:e||Ps,n.label=n.label||(t?Vn:Bn)}if(Ut||s>0){n.width=n.width==null?1:n.width,n.paths=n.paths||Nn||$n,n.fillTo=e(n.fillTo||Ts),n.pxAlign=+t(n.pxAlign,Hn),n.pxRound=xs(n.pxAlign),n.stroke=e(n.stroke||null),n.fill=e(n.fill||null),n._stroke=n._fill=n._paths=n._focus=null;let o=Rs(h(1,n.width),1),s=n.points=l({},{size:o,width:h(1,o*.2),stroke:n.stroke,space:o*2,paths:Sn,_stroke:null,_fill:null},n.points);s.show=e(s.show),s.filter=e(s.filter),s.fill=e(s.fill),s.stroke=e(s.stroke),s.paths=e(s.paths),s.pxAlign=n.pxAlign}if($e){let e=xi(n,s);Ft.splice(s,0,e[0]),Qs.splice(s,0,e[1]),J.values.push(null)}if(Te){Ae.splice(s,0,null);let e=null;Ut?s==0&&(e=Zo(n,s)):s>0&&(e=Zo(n,s)),Ce.splice(s,0,e),$t.splice(s,0,0),Bt.splice(s,0,0)}oe("addSeries",s)}function oi(e,t){t=t??k.length,e=P==1?Et(e,t,Xe,it):Et(e,t,{},tt),k.splice(t,0,e),Jo(k[t],t)}m.addSeries=oi;function ai(e){if(k.splice(e,1),$e){J.values.splice(e,1),Qs.splice(e,1);let t=Ft.splice(e,1)[0];Eo(null,t.firstChild),t.remove()}Te&&(Ae.splice(e,1),Ce.splice(e,1)[0].remove(),$t.splice(e,1),Bt.splice(e,1)),oe("delSeries",e)}m.delSeries=ai;const pt=[!1,!1,!1,!1];function pi(t,n){if(t._show=t.show,t.show){let a=t.side%2,s=L[t.scale];s==null&&(t.scale=a?k[1].scale:G,s=L[t.scale]);let i=s.time;t.size=e(t.size),t.space=e(t.space),t.rotate=e(t.rotate),C(t.incrs)&&t.incrs.forEach(e=>{!O.has(e)&&O.set(e,Pn(e))}),t.incrs=e(t.incrs||(s.distr==2?Kt:i?Fn==1?go:mo:E)),t.splits=e(t.splits||(i&&s.distr==1?vi:s.distr==3?qe:s.distr==4?Vs:qs)),t.stroke=e(t.stroke),t.grid.stroke=e(t.grid.stroke),t.ticks.stroke=e(t.ticks.stroke),t.border.stroke=e(t.border.stroke);let o=t.values;t.values=C(o)&&!C(o[0])?e(o):i?C(o)?pn(bt,fn(o,Wn)):Ln(o)?co(bt,o):o||bi:o||Ys,t.filter=e(t.filter||(s.distr>=3&&s.log==10?Is:s.distr==3&&s.log==2?Hs:Ge)),t.font=gn(t.font),t.labelFont=gn(t.labelFont),t._size=t.size(m,null,n,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(pt[n]=!0,t._el=b(rs,xt))}}function Mn(e,t,n){let[i,a,r,c]=n,l=t%2,o=0;return l==0&&(c||a)&&(o=t==0&&!i||t==2&&!r?d(Je.size/3):0),l==1&&(i||r)&&(o=t==1&&!a||t==3&&!c?d(Le.size/2):0),o}const Uo=m.padding=(s.padding||[Mn,Mn,Mn,Mn]).map(n=>e(t(n,Mn))),rt=m._padding=Uo.map((e,t)=>e(m,t,pt,0));let ce,te=null,ie=null;const Xn=P==1?k[0].idxs:null;let Se=null,nn=!1;function Ro(e,t){if(r=e??[],m.data=m._data=r,P==2){ce=0;for(let e=1;e<k.length;e++)ce+=r[e][0].length}else{r.length==0&&(m.data=m._data=r=[[]]),Se=r[0],ce=Se.length;let e=r;if(Vt==2){e=r.slice();let t=e[0]=Array(ce);for(let e=0;e<ce;e++)t[e]=e}m._data=r=e}if(zt(!0),oe("setData"),Vt==2&&(Mt=!0),t!==!1){let e=T;e.auto(m,nn)?eo():ht(G,e.min,e.max),vt=vt||x.left>=0,ke=!0,Nt()}}m.setData=Ro;function eo(){nn=!0;let e,t;P==1&&(ce>0?(te=Xn[0]=0,ie=Xn[1]=ce-1,e=r[0][te],t=r[0][ie],Vt==2?(e=te,t=ie):e==t&&(Vt==3?[e,t]=ge(e,e,T.log,!1):Vt==4?[e,t]=ot(e,e,T.log,!1):T.time?t=e+d(86400/Fn):[e,t]=we(e,t,ae,!0))):(te=Xn[0]=e=null,ie=Xn[1]=t=null)),ht(G,e,t)}let ns,Tt,ys,ao,cs,us,ms,ps,bs,je;function Qo(e,t,n,s,o,i){e??(e=De),n??(n=fe),s??(s="butt"),o??(o=De),i??(i="round"),e!=ns&&(f.strokeStyle=ns=e),o!=Tt&&(f.fillStyle=Tt=o),t!=ys&&(f.lineWidth=ys=t),i!=cs&&(f.lineJoin=cs=i),s!=us&&(f.lineCap=us=s),n!=ao&&f.setLineDash(ao=n)}function Xo(e,t,n,s){t!=Tt&&(f.fillStyle=Tt=t),e!=ms&&(f.font=ms=e),n!=ps&&(f.textAlign=ps=n),s!=bs&&(f.textBaseline=bs=s)}function Fs(e,n,s,o,i=0){if(o.length>0&&e.auto(m,nn)&&(n==null||n.min==null)){let a=t(te,0),r=t(ie,o.length-1),n=s.min==null?Ds(o,a,r,i,e.distr==3):[s.min,s.max];e.min=v(e.min,s.min=n[0]),e.max=h(e.max,s.max=n[1])}}const Wo={min:null,max:null};function Hi(){for(let e in L){let t=L[e];ee[e]==null&&(t.min==null||ee[G]!=null&&t.auto(m,nn))&&(ee[e]=Wo)}for(let e in L){let t=L[e];ee[e]==null&&t.from!=null&&ee[t.from]!=null&&(ee[e]=Wo)}ee[G]!=null&&zt(!0);let e={};for(let t in ee){let n=ee[t];if(n!=null){let s=e[t]=K(L[t],Gs);if(n.min!=null)l(s,n);else if(t!=G||P==2)if(ce==0&&s.from==null){let e=s.range(m,null,null,t);s.min=e[0],s.max=e[1]}else s.min=o,s.max=-o}}if(ce>0){k.forEach((t,n)=>{if(P==1){let o=t.scale,i=ee[o];if(i==null)return;let s=e[o];if(n==0){let e=s.range(m,s.min,s.max,o);s.min=e[0],s.max=e[1],te=j(s.min,r[0]),ie=j(s.max,r[0]),ie-te>1&&(r[0][te]<s.min&&te++,r[0][ie]>s.max&&ie--),t.min=Se[te],t.max=Se[ie]}else t.show&&t.auto&&Fs(s,i,t,r[n],t.sorted);t.idxs[0]=te,t.idxs[1]=ie}else if(n>0&&t.show&&t.auto){let[o,s]=t.facets,i=o.scale,a=s.scale,[d,u]=r[n],c=e[i],l=e[a];c!=null&&Fs(c,ee[i],o,d,o.sorted),l!=null&&Fs(l,ee[a],s,u,s.sorted),t.min=s.min,t.max=s.max}});for(let n in e){let t=e[n],s=ee[n];if(t.from==null&&(s==null||s.min==null)){let e=t.range(m,t.min==o?null:t.min,t.max==-o?null:t.max,n);t.min=e[0],t.max=e[1]}}}for(let n in e){let t=e[n];if(t.from!=null){let s=e[t.from];if(s.min==null)t.min=t.max=null;else{let e=t.range(m,s.min,s.max,n);t.min=e[0],t.max=e[1]}}}let t={},n=!1;for(let i in e){let o=e[i],s=L[i];if(s.min!=o.min||s.max!=o.max){s.min=o.min,s.max=o.max;let e=s.distr;s._min=e==3?w(s.min):e==4?xe(s.min,s.asinh):e==100?s.fwd(s.min):s.min,s._max=e==3?w(s.max):e==4?xe(s.max,s.asinh):e==100?s.fwd(s.max):s.max,t[i]=n=!0}}if(n){k.forEach((e,n)=>{P==2?n>0&&t.y&&(e._paths=null):t[e.scale]&&(e._paths=null)});for(let e in t)Mt=!0,oe("setScale",e);Te&&x.left>=0&&(vt=ke=!0)}for(let e in ee)ee[e]=null}function Ni(e){let t=We(te-1,0,ce-1),n=We(ie+1,0,ce-1);for(;e[t]==null&&t>0;)t--;for(;e[n]==null&&n<ce-1;)n++;return[t,n]}function Di(){if(ce>0){let e=k.some(e=>e._focus)&&je!=Re.alpha;e&&(f.globalAlpha=je=Re.alpha),k.forEach((e,t)=>{if(t>0&&e.show&&(Vo(t,!1),Vo(t,!0),e._paths==null)){let n=je;je!=e.alpha&&(f.globalAlpha=je=e.alpha);let s=P==2?[0,r[t][0].length-1]:Ni(r[t]);e._paths=e.paths(m,t,s[0],s[1]),je!=n&&(f.globalAlpha=je=n)}}),k.forEach((e,t)=>{if(t>0&&e.show){let n=je;je!=e.alpha&&(f.globalAlpha=je=e.alpha),e._paths!=null&&Bo(t,!1);{let n=e._paths!=null?e._paths.gaps:null,s=e.points.show(m,t,te,ie,n),o=e.points.filter(m,t,s,n);(s||o)&&(e.points._paths=e.points.paths(m,t,te,ie,o),Bo(t,!0))}je!=n&&(f.globalAlpha=je=n),oe("drawSeries",t)}}),e&&(f.globalAlpha=je=1)}}function Vo(e,t){let n=t?k[e].points:k[e];n._stroke=n.stroke(m,e),n._fill=n.fill(m,e)}function Bo(e,t){let o=t?k[e].points:k[e],{stroke:d,fill:u,clip:h,flags:m,_stroke:c=o._stroke,_fill:r=o._fill,_width:s=o.width}=o._paths;s=i(s*n,3);let l=null,a=s%2/2;t&&r==null&&(r=s>0?"#fff":c);let p=o.pxAlign==1&&a>0;if(p&&f.translate(a,a),!t){let e=_t-s/2,t=jt-s/2,n=ft+s,o=gt+s;l=new Path2D,l.rect(e,t,n,o)}t?Js(c,s,o.dash,o.cap,r,d,u,m,h):Ti(e,c,s,o.dash,o.cap,r,d,u,m,l,h),p&&f.translate(-a,-a)}function Ti(e,t,n,s,o,i,a,c,l,d,u){let h=!1;l!=0&&yt.forEach((f,p)=>{if(f.series[0]==e){let g=k[f.series[1]],j=r[f.series[1]],e=(g._paths||U).band;C(e)&&(e=f.dir==1?e[0]:e[1]);let v,b=null;g.show&&e&&Ns(j,te,ie)?(b=f.fill(m,p)||i,v=g._paths.clip):e=null,Js(t,n,s,o,b,a,c,l,d,u,v,e),h=!0}}),h||Js(t,n,s,o,i,a,c,l,d,u)}const yo=I|me;function Js(e,t,n,s,o,i,a,r,c,l,d,u){Qo(e,t,n,s,o),(c||l||u)&&(f.save(),c&&f.clip(c),l&&f.clip(l)),u?(r&yo)==yo?(f.clip(u),d&&f.clip(d),es(o,a),ts(e,i,t)):r&me?(es(o,a),f.clip(u),ts(e,i,t)):r&I&&(f.save(),f.clip(u),d&&f.clip(d),es(o,a),f.restore(),ts(e,i,t)):(es(o,a),ts(e,i,t)),(c||l||u)&&f.restore()}function ts(e,t,n){n>0&&(t instanceof Map?t.forEach((e,t)=>{f.strokeStyle=ns=t,f.stroke(e)}):t!=null&&e&&f.stroke(t))}function es(e,t){t instanceof Map?t.forEach((e,t)=>{f.fillStyle=Tt=t,f.fill(e)}):t!=null&&e&&f.fill(t)}function Si(e,t,n,s){let o=He[e],i;if(s<=0)i=[0,0];else{let a=o._space=o.space(m,e,t,n,s),r=o._incrs=o.incrs(m,e,t,n,s,a);i=ro(t,n,r,s,a)}return o._found=i}function oo(e,t,n,s,o,i,a,r,c,l){let d=a%2/2;Hn==1&&f.translate(d,d),Qo(r,a,c,l,r),f.beginPath();let u,h,m,p,g=o+(s==0||s==3?-i:i);n==0?(h=o,p=g):(u=o,m=g);for(let s=0;s<e.length;s++)t[s]!=null&&(n==0?u=m=e[s]:h=p=e[s],f.moveTo(u,h),f.lineTo(m,p));f.stroke(),Hn==1&&f.translate(-d,-d)}function Ai(e){let t=!0;return He.forEach((n,s)=>{if(!n.show)return;let o=L[n.scale];if(o.min==null){n._show&&(t=!1,n._show=!1,zt(!1));return}n._show||(t=!1,n._show=!0,zt(!1));let d=n.side,g=d%2,{min:r,max:c}=o,[l,i]=Si(s,r,c,g==0?S:M);if(i==0)return;let v=o.distr==2,a=n._splits=n.splits(m,s,r,c,l,i,v),b=o.distr==2?a.map(e=>Se[e]):a,u=o.distr==2?Se[a[1]]-Se[a[0]]:l,h=n._values=n.values(m,n.filter(m,b,s,i,u),s,i,u);n._rotate=d==2?n.rotate(m,h,s,i):0;let f=n._size;n._size=p(n.size(m,h,s,e)),f!=null&&n._size!=f&&(t=!1)}),t}function ni(e){let t=!0;return Uo.forEach((n,s)=>{let o=n(m,s,pt,e);o!=rt[s]&&(t=!1),rt[s]=o}),t}function ki(){for(let s=0;s<He.length;s++){let e=He[s];if(!e.show||!e._show)continue;let o=e.side,t=o%2,r,c,C=e.stroke(m,s),k=o==0||o==3?-1:1,[y,v]=e._found;if(e.label!=null){let a=e.labelGap*k,i=d((e._lpos+a)*n);Xo(e.labelFont[0],C,"center",o==2?B:Pe),f.save(),t==1?(r=c=0,f.translate(i,d(jt+gt/2)),f.rotate((o==3?-Z:Z)/2)):(r=d(_t+ft/2),c=i);let l=Yn(e.label)?e.label(m,s,y,v):e.label;f.fillText(l,r,c),f.restore()}if(v==0)continue;let b=L[e.scale],D=t==0?ft:gt,R=t==0?_t:jt,h=e._splits,w=b.distr==2?h.map(e=>Se[e]):h,A=b.distr==2?Se[h[1]]-Se[h[0]]:y,a=e.ticks,p=e.border,O=a.show?a.size:0,x=d(O*n),P=d((e.alignTo==2?e._size-O-e.gap:e.gap)*n),u=e._rotate*-Z/180,j=Ho(e._pos*n),z=(x+P)*k,S=j+z;c=t==0?S:0,r=t==1?S:0;let M=e.font[0],F=e.align==1?N:e.align==2?Ee:u>0?N:u<0?Ee:t==0?"center":o==3?Ee:N,T=u||t==1?"middle":o==2?B:Pe;Xo(M,C,F,T);let _=e.font[1]*e.lineGap,g=h.map(e=>Ho(so(e,b,D,R))),E=e._values;for(let n=0;n<E.length;n++){let e=E[n];if(e!=null){t==0?r=g[n]:c=g[n],e=""+e;let s=e.indexOf(`
`)==-1?[e]:e.split(/\n/gm);for(let e=0;e<s.length;e++){let t=s[e];u?(f.save(),f.translate(r,c+e*_),f.rotate(u),f.fillText(t,0,0),f.restore()):f.fillText(t,r,c+e*_)}}}a.show&&oo(g,a.filter(m,w,s,v,A),t,o,j,x,i(a.width*n,3),a.stroke(m,s),a.dash,a.cap);let l=e.grid;l.show&&oo(g,l.filter(m,w,s,v,A),t,t==0?2:1,t==0?jt:_t,t==0?gt:ft,i(l.width*n,3),l.stroke(m,s),l.dash,l.cap),p.show&&oo([j],[1],t==0?1:0,t==0?1:2,t==1?jt:_t,t==1?gt:ft,i(p.width*n,3),p.stroke(m,s),p.dash,p.cap)}oe("drawAxes")}function zt(e){k.forEach((t,n)=>{n>0&&(t._paths=null,e&&(P==1?(t.min=null,t.max=null):t.facets.forEach(e=>{e.min=null,e.max=null})))})}let Qn=!1,is=!1,cn=[];function Ci(){is=!1;for(let e=0;e<cn.length;e++)oe(...cn[e]);cn.length=0}function Nt(){Qn||(an(Co),Qn=!0)}function Oi(e,t=!1){Qn=!0,is=t,e(m),Co(),t&&cn.length>0&&queueMicrotask(Ci)}m.batch=Oi;function Co(){if(Ls&&(Hi(),Ls=!1),Mt&&(Fi(),Mt=!1),zn){if(a(rn,N,Oe),a(rn,B,ye),a(rn,W,S),a(rn,$,M),a(ve,N,Oe),a(ve,B,ye),a(ve,W,S),a(ve,$,M),a(xt,W,Gn),a(xt,$,ss),St.width=d(Gn*n),St.height=d(ss*n),He.forEach(({_el:e,_show:t,_size:n,_pos:s,side:o})=>{if(e!=null)if(t){let i=o===3||o===0?n:0,t=o%2==1;a(e,t?"left":"top",s-i),a(e,t?"width":"height",n),a(e,t?"top":"left",t?ye:Oe),a(e,t?"height":"width",t?M:S),Ke(e,A)}else g(e,A)}),ns=Tt=ys=cs=us=ms=ps=bs=ao=null,je=1,on(!0),Oe!=Po||ye!=_o||S!=to||M!=Xs){zt(!1);let e=S/to,t=M/Xs;if(Te&&!vt&&x.left>=0){x.left*=e,x.top*=t,Lt&&_(Lt,d(x.left),0,S,M),Rt&&_(Rt,0,d(x.top),S,M);for(let n=0;n<Ce.length;n++){let s=Ce[n];s!=null&&($t[n]*=e,Bt[n]*=t,_(s,p($t[n]),p(Bt[n]),S,M))}}if(V.show&&!Dn&&V.left>=0&&V.width>0){V.left*=e,V.width*=e,V.top*=t,V.height*=t;for(let e in Us)a(Wt,e,V[e])}Po=Oe,_o=ye,to=S,Xs=M}oe("setSize"),zn=!1}Gn>0&&ss>0&&(f.clearRect(0,0,St.width,St.height),oe("drawClear"),ci.forEach(e=>e()),oe("draw")),V.show&&Dn&&(In(V),Dn=!1),Te&&vt&&(wt(null,!0,!1),vt=!1),J.show&&J.live&&ke&&(_s(),ke=!1),Go||(Go=!0,m.status=1,oe("ready")),nn=!1,Qn=!1}m.redraw=(e,t)=>{Mt=t||!1,e!==!1?ht(G,T.min,T.max):Nt()};function bo(e,t){let n=L[e];if(n.from==null){if(ce==0){let s=n.range(m,t.min,t.max,e);t.min=s[0],t.max=s[1]}if(t.min>t.max){let e=t.min;t.min=t.max,t.max=e}if(ce>1&&t.min!=null&&t.max!=null&&t.max-t.min<1e-16)return;e==G&&n.distr==2&&ce>0&&(t.min=j(t.min,r[0]),t.max=j(t.max,r[0]),t.min==t.max&&t.max++),ee[e]=t,Ls=!0,Nt()}}m.setScale=bo;let vo,os,Lt,Rt,Fo,To,It,Yt,No,Lo,q,Y,at=!1;const re=x.drag;let se=re.x,ne=re.y;Te&&(x.x&&(vo=b(ds,ve)),x.y&&(os=b(js,ve)),T.ori==0?(Lt=vo,Rt=os):(Lt=os,Rt=vo),q=x.left,Y=x.top);const V=m.select=l({show:!0,over:!0,left:0,width:0,top:0,height:0},s.select),Wt=V.show?b(ls,V.over?ve:rn):null;function In(e,t){if(V.show){for(let t in e)V[t]=e[t],t in Us&&a(Wt,t,e[t]);t!==!1&&oe("setSelect")}}m.setSelect=In;function gi(e){let t=k[e];if(t.show)$e&&Ke(Ft[e],A);else if($e&&g(Ft[e],A),Te){let t=Ut?Ce[0]:Ce[e];t!=null&&_(t,-10,-10,S,M)}}function ht(e,t,n){bo(e,{min:t,max:n})}function Be(e,t,n,s){t.focus!=null&&si(e),t.show!=null&&k.forEach((n,s)=>{s>0&&(e==s||e==null)&&(n.show=t.show,gi(s),P==2?(ht(n.facets[0].scale,null,null),ht(n.facets[1].scale,null,null)):ht(n.scale,null,null),Nt())}),n!==!1&&oe("setSeries",e,t),s&&Jt("setSeries",m,e,t)}m.setSeries=Be;function fi(e,t){l(yt[e],t)}function mi(n,s){n.fill=e(n.fill||null),n.dir=t(n.dir,-1),s=s??yt.length,yt.splice(s,0,n)}function ui(e){e==null?yt.length=0:yt.splice(e,1)}m.addBand=mi,m.setBand=fi,m.delBand=ui;function li(e,t){k[e].alpha=t,Te&&Ce[e]!=null&&(Ce[e].style.opacity=t),$e&&Ft[e]&&(Ft[e].style.opacity=t)}let Ue,ct,At;const Dt={focus:!0};function si(e){if(e!=At){let t=e==null,n=Re.alpha!=1;k.forEach((s,o)=>{if(P==1||o>0){let i=t||o==0||o==e;s._focus=t?null:i,n&&li(o,i?1:Re.alpha)}}),At=e,n&&Nt()}}$e&&qt&&st(Ne,ut,e=>{if(x._lock)return;kt(e),At!=null&&Be(null,Dt,!0,Q.setSeries)});function Ie(e,t,s){let o=L[t];s&&(e=e/n-(o.ori==1?ye:Oe));let i=S;o.ori==1&&(i=M,e=i-e),o.dir==-1&&(e=i-e);let c=o._min,l=o._max,d=e/i,a=c+(l-c)*d,r=o.distr;return r==3?z(10,a):r==4?Zn(a,o.asinh):r==100?o.bwd(a):a}function ii(e,t){let n=Ie(e,G,t);return j(n,r[0],te,ie)}m.valToIdx=e=>j(e,r[0]),m.posToIdx=ii,m.posToVal=Ie,m.valToPos=(e,t,n)=>L[t].ori==0?en(e,L[t],n?ft:S,n?_t:0):tn(e,L[t],n?gt:M,n?jt:0),m.setCursor=(e,t,n)=>{q=e.left,Y=e.top,wt(null,t,n)};function ti(e,t){a(Wt,N,V.left=e),a(Wt,W,V.width=t)}function ei(e,t){a(Wt,B,V.top=e),a(Wt,$,V.height=t)}let un=T.ori==0?ti:ei,ln=T.ori==1?ti:ei;function di(){if($e&&J.live)for(let e=P==2?1:0;e<k.length;e++){if(e==0&&Ct)continue;let t=J.values[e],n=0;for(let s in t)Qs[e][n++].firstChild.nodeValue=t[s]}}function _s(e,t){if(e!=null&&(e.idxs?e.idxs.forEach((e,t)=>{Ae[t]=e}):Rn(e.idx)||Ae.fill(e.idx),J.idx=Ae[0]),$e&&J.live){for(let e=0;e<k.length;e++)(e>0||P==1&&!Ct)&&hi(e,Ae[e]);di()}ke=!1,t!==!1&&oe("setLegend")}m.setLegend=_s;function hi(e,t){let s=k[e],o=e==0&&Vt==2?Se:r[e],n;Ct?n=s.values(m,e,t)??io:(n=s.value(m,t==null?null:o[t],e,t),n=n==null?io:{_:n}),J.values[e]=n}function wt(e,t,n){No=q,Lo=Y,[q,Y]=x.move(m,q,Y),x.left=q,x.top=Y,Te&&(Lt&&_(Lt,d(q),0,S,M),Rt&&_(Rt,0,d(Y),S,M));let s,l=te>ie;Ue=o,ct=null;let i=T.ori==0?S:M,a=T.ori==1?S:M;if(q<0||ce==0||l){s=x.idx=null;for(let e=0;e<k.length;e++){let t=Ce[e];t!=null&&_(t,-10,-10,S,M)}qt&&Be(null,Dt,!0,e==null&&Q.setSeries),J.live&&(Ae.fill(s),ke=!0)}else{let o,e,l;P==1&&(o=T.ori==0?q:Y,e=Ie(o,G),s=x.idx=j(e,r[0],te,ie),l=Ve(r[0][s],T,i,0));let t=-10,n=-10,d=0,u=0,h=!0,f="",g="";for(let o=P==2?1:0;o<k.length;o++){let j=k[o],y=Ae[o],w=y==null?null:P==1?r[o][y]:r[o][1][y],v=x.dataIdx(m,o,s,e),b=v==null?null:P==1?r[o][v]:r[o][1][v];if(ke=ke||b!=w||v!=y,Ae[o]=v,o>0&&j.show){let y=v==null?-10:v==s?l:Ve(P==1?r[0][v]:r[o][0][v],T,i,0),e=b==null?-10:Zt(b,P==1?L[j.scale]:L[j.facets[1].scale],a,0);if(qt&&b!=null){let n=T.ori==1?q:Y,t=c(Re.dist(m,o,v,e,n));if(t<Ue){let e=Re.bias;if(e!=0){let s=Ie(n,j.scale),a=b>=0?1:-1,i=s>=0?1:-1;i==a&&(i==1?e==1?b>=s:b<=s:e==1?b<=s:b>=s)&&(Ue=t,ct=o)}else Ue=t,ct=o}}if(ke||Ut){let c,l;T.ori==0?(c=y,l=e):(c=e,l=y);let a,r,s,i,v,b,j=!0,w=pe.bbox;if(w!=null){j=!1;let e=w(m,o);s=e.left,i=e.top,a=e.width,r=e.height}else s=c,i=l,a=r=pe.size(m,o);if(b=pe.fill(m,o),v=pe.stroke(m,o),Ut)o==ct&&Ue<=Re.prox&&(t=s,n=i,d=a,u=r,h=j,f=b,g=v);else{let e=Ce[o];e!=null&&($t[o]=s,Bt[o]=i,gs(e,a,r,j),vs(e,b,v),_(e,p(s),p(i),S,M))}}}}if(Ut){let e=Re.prox,s=At==null?Ue<=e:Ue>e||ct!=At;if(ke||s){let e=Ce[0];e!=null&&($t[0]=t,Bt[0]=n,gs(e,d,u,h),vs(e,f,g),_(e,p(t),p(n),S,M))}}}if(V.show&&at)if(e!=null){let[n,s]=Q.scales,[l,d]=Q.match,[t,o]=e.cursor.sync.scales,r=e.cursor.drag;if(se=r._x,ne=r._y,se||ne){let{left:_,top:y,width:g,height:b}=e.select,j=e.scales[t].ori,p=e.posToVal,r,h,m,u,f,w=n!=null&&l(n,t),O=s!=null&&d(s,o);w&&se?(j==0?(r=_,h=g):(r=y,h=b),m=L[n],u=Ve(p(r,t),m,i,0),f=Ve(p(r+h,t),m,i,0),un(v(u,f),c(f-u))):un(0,i),O&&ne?(j==1?(r=_,h=g):(r=y,h=b),m=L[s],u=Zt(p(r,o),m,a,0),f=Zt(p(r+h,o),m,a,0),ln(v(u,f),c(f-u))):ln(0,a)}else Ks()}else{let n=c(No-Fo),s=c(Lo-To);if(T.ori==1){let e=n;n=s,s=e}se=re.x&&n>=re.dist,ne=re.y&&s>=re.dist;let o=re.uni;o!=null?se&&ne&&(se=n>=o,ne=s>=o,!se&&!ne&&(s>n?ne=!0:se=!0)):re.x&&re.y&&(se||ne)&&(se=ne=!0);let e,t;se&&(T.ori==0?(e=It,t=q):(e=Yt,t=Y),un(v(e,t),c(t-e)),ne||ln(0,a)),ne&&(T.ori==1?(e=It,t=q):(e=Yt,t=Y),ln(v(e,t),c(t-e)),se||un(0,i)),!se&&!ne&&(un(0,0),ln(0,0))}if(re._x=se,re._y=ne,e==null){if(n){if($o!=null){let[e,t]=Q.scales;Q.values[0]=e!=null?Ie(T.ori==0?q:Y,e):null,Q.values[1]=t!=null?Ie(T.ori==1?q:Y,t):null}Jt(Me,m,q,Y,S,M,s)}if(qt){let e=n&&Q.setSeries,t=Re.prox;At==null?Ue<=t&&Be(ct,Dt,!0,e):Ue>t?Be(null,Dt,!0,e):ct!=At&&Be(ct,Dt,!0,e)}}ke&&(J.idx=s,_s()),t!==!1&&oe("setCursor")}let mt=null;Object.defineProperty(m,"rect",{get(){return mt==null&&on(!1),mt}});function on(e=!1){e?mt=null:(mt=ve.getBoundingClientRect(),oe("syncRect",mt))}function Ko(e,t,n,s,o,i,a){if(x._lock)return;if(at&&e!=null&&e.movementX==0&&e.movementY==0)return;Ws(e,t,n,s,o,i,a,!1,e!=null),e!=null?wt(null,!0,!0):wt(t,!0,!1)}function Ws(e,t,n,s,o,i,a,r,c){if(mt==null&&on(!1),kt(e),e!=null)n=e.clientX-mt.left,s=e.clientY-mt.top;else{if(n<0||s<0){q=-10,Y=-10;return}let[a,r]=Q.scales,c=t.cursor.sync,[g,p]=c.values,[u,h]=c.scales,[f,m]=Q.match,e=t.axes[0].side%2==1,d=T.ori==0?S:M,l=T.ori==1?S:M,v=e?i:o,b=e?o:i,j=e?s:n,y=e?n:s;if(u!=null?n=f(a,u)?so(g,L[a],d,0):-10:n=d*(j/v),h!=null?s=m(r,h)?so(p,L[r],l,0):-10:s=l*(y/b),T.ori==1){let e=n;n=s,s=e}}c&&(t==null||t.cursor.event.type==Me)&&((n<=1||n>=S-1)&&(n=D(n,S)),(s<=1||s>=M-1)&&(s=D(s,M))),r?(Fo=n,To=s,[It,Yt]=x.move(m,n,s)):(q=n,Y=s)}const Us={width:0,height:0,left:0,top:0};function Ks(){In(Us,!1)}let zo,So,Ao,xo;function Oo(e,t,n,s,o,i,a){at=!0,se=ne=re._x=re._y=!1,Ws(e,t,n,s,o,i,a,!0,!1),e!=null&&(st(he,_e,wo,!1),Jt(dt,m,It,Yt,S,M,null));let{left:r,top:c,width:l,height:d}=V;zo=r,So=c,Ao=l,xo=d}function wo(e,t,n,s,i,a,r){at=re._x=re._y=!1,Ws(e,t,n,s,i,a,r,!1,!0);let{left:d,top:u,width:c,height:l}=V,h=c>0||l>0,f=zo!=d||So!=u||Ao!=c||xo!=l;if(h&&f&&In(V),re.setScale&&h&&f){let e=d,n=c,t=u,s=l;if(T.ori==1&&(e=u,n=l,t=d,s=c),se&&ht(G,Ie(e,G),Ie(e+n,G)),ne)for(let e in L){let n=L[e];e!=G&&n.from==null&&n.min!=o&&ht(e,Ie(t+s,e),Ie(t,e))}Ks()}else x.lock&&(x._lock=!x._lock,wt(t,!0,e!=null));e!=null&&(Eo(he,_e),Jt(he,m,q,Y,S,M,null))}function Ei(e){if(x._lock)return;kt(e);let r=at;if(at){let s=!0,o=!0,e=10,t,n;T.ori==0?(t=se,n=ne):(t=ne,n=se),t&&n&&(s=q<=e||q>=S-e,o=Y<=e||Y>=M-e),t&&s&&(q=q<It?0:S),n&&o&&(Y=Y<Yt?0:M),wt(null,!0,!0),at=!1}q=-10,Y=-10,Ae.fill(null),wt(null,!0,!0),r&&(at=r)}function ko(e){if(x._lock)return;kt(e),eo(),Ks(),e!=null&&Jt(et,m,q,Y,S,M,null)}function Do(){He.forEach(lo),Cs(m.width,m.height,!0)}H(X,R,Do);const Gt={};Gt.mousedown=Oo,Gt.mousemove=Ko,Gt.mouseup=wo,Gt.dblclick=ko,Gt.setSeries=(e,t,n,s)=>{let o=Q.match[2];n=o(m,t,n),n!=-1&&Be(n,s,!0,!1)},Te&&(st(dt,ve,Oo),st(Me,ve,Ko),st(ze,ve,e=>{kt(e),on(!1)}),st(Ne,ve,Ei),st(et,ve,ko),le.add(m),m.syncRect=on);const Jn=m.hooks=s.hooks||{};function oe(e,t,n){is?cn.push([e,t,n]):e in Jn&&Jn[e].forEach(e=>{e.call(null,m,t,n)})}(s.plugins||[]).forEach(e=>{for(let t in e.hooks)Jn[t]=(Jn[t]||[]).concat(e.hooks[t])});const jo=(e,t,n)=>n,Q=l({key:null,setSeries:!1,filters:{pub:Qe,sub:Qe},scales:[G,k[1]?k[1].scale:null],match:[Ze,Ze,jo],values:[null,null]},x.sync);Q.match.length==2&&Q.match.push(jo),x.sync=Q;const $o=Q.key,$s=fs($o);function Jt(e,t,n,s,o,i,a){Q.filters.pub(e,t,n,s,o,i,a)&&$s.pub(e,t,n,s,o,i,a)}$s.sub(m);function Ri(e,t,n,s,o,i,a){Q.filters.sub(e,t,n,s,o,i,a)&&Gt[e](null,t,n,s,o,i,a)}m.pub=Ri;function Pi(){$s.unsub(m),le.delete(m),Qt.clear(),Ot(X,R,Do),Ye.remove(),ut?.remove(),oe("destroy")}m.destroy=Pi;function Bs(){oe("init",s,r),Ro(r||s.data,!1),ee[G]?bo(G,ee[G]):eo(),Dn=V.show&&(V.width>0||V.height>0),vt=ke=!0,Cs(s.width,s.height)}return k.forEach(Jo),He.forEach(pi),u?u instanceof HTMLElement?(u.appendChild(Ye),Bs()):u(m,Bs):Bs(),m}u.assign=l,u.fmtNum=ke,u.rangeNum=we,u.rangeLog=ge,u.rangeAsinh=ot,u.orient=L,u.pxRatio=n,u.join=ao,u.fmtDate=Ht,u.tzDate=_o,u.sync=fs;{u.addGap=Fs,u.clipGaps=ye;let e=u.paths={points:os};e.linear=Jn,e.stepped=Bs,e.bars=$s,e.spline=Us}St=10,un=[1200,1300,1500],q=JSON.parse(localStorage.getItem("authUser")||"null"),q||(window.location.href="/login/"),q?.authorized||(localStorage.removeItem("authUser"),window.location.href="/login/"),screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").then(()=>console.log("Orientation locked to landscape")).catch(e=>console.error("Failed to lock orientation:",e));function ln(e,t){const n=new Map;for(let s=0;s<e.length;s++){const a=e[s][0],o=e[s][1];if(o===null||un.includes(o))continue;if(t&&t!==a)continue;const i=Math.floor(o/St)*St;n.set(i,(n.get(i)||0)+1)}const s=Array.from(n.keys()).sort((e,t)=>e-t),o=s.map(e=>n.get(e));return[s,o]}function cn(e,t,n,s,o){const i=t[0],a=t[t.length-1],r=[t,n],c={title:o,width:800,height:400,scales:{x:{time:!1},y:{auto:!0}},axes:[{label:"Rating",values:(e,t)=>t.map(e=>e.toFixed(0))},{label:"Players"}],series:[{},{label:"Count",stroke:"blue",width:2,points:{show:!1}}],hooks:{draw:[e=>{const t=e.ctx,{top:o,height:r}=e.bbox,n=s;if(n>=i&&n<=a){const s=Math.round(e.valToPos(n,"x",!0));t.save(),t.strokeStyle="red",t.lineWidth=2,t.setLineDash([6,6]),t.beginPath(),t.moveTo(s,o),t.lineTo(s,o+r),t.stroke(),t.font="12px sans-serif",t.fillStyle="red",t.textAlign="center",t.fillText(`Your rating: ${n}`,s,o-6),t.restore()}}]}};return new u(c,r,document.getElementById(e))}async function on(e,t){return await fetch("/data/member_"+t+"_ratings.json").then(e=>e.json()).then(n=>{console.log("data: "+n);let s=new Map(n);console.log("Map entries: "+JSON.stringify(Array.from(s.entries())));let o=s.get(e);return console.log(t+" rating: "+o),o})}function nn(e,t){fetch("/data/all_chessa_ratings.json").then(e=>e.json()).then(n=>{const[s,o]=ln(n,t);Dt?Dt.setData([s,o]):Dt=cn("chessa-chart",s,o,e,"Chessa Rating Distribution")})}function qt(e,t){fetch("/data/all_fide_ratings.json").then(e=>e.json()).then(n=>{const[s,o]=ln(n,t);Bt?Bt.setData([s,o]):Bt=cn("fide-chart",s,o,e,"FIDE Rating Distribution")})}if(q?.authorized){const e=q.chessaId,t=q.fideId;console.log("chessaId: "+e),console.log("fideId: "+t),on(e,"chessa").then(e=>{console.log("chessa rating: "+e),document.querySelectorAll("input[name='chessaFilter']").forEach(t=>{t.addEventListener("change",t=>{nn(e,t.target.value)}),nn(e)})}),on(t,"fide").then(e=>{console.log("fide rating: "+e),document.querySelectorAll("input[name='fideFilter']").forEach(t=>{t.addEventListener("change",t=>{qt(e,t.target.value)}),qt(e)})})}})()